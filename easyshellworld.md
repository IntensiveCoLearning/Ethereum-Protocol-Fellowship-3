---
timezone: UTC+8
---

> 请在上边的 timezone 添加你的当地时区(UTC)，这会有助于你的打卡状态的自动化更新，如果没有添加，默认为北京时间 UTC+8 时区


# None

1. 自我介绍: 
无名的人阿！

>我是这路上 没名字的人
我没有新闻 没有人评论
要拼尽所有 换得普通的剧本
曲折辗转 不过谋生
我是离开 小镇上的人
是哭笑着 吃过饭的人
是赶路的人 是养家的人
是城市背景的 无声
我不过 想亲手触摸
弯过腰的每一刻
留下的 湿透的脚印 是不是值得
这哽咽 若你也相同
就是同路的朋友

2. 你认为你会完成本次残酷学习吗？ 
坚持一下呗！  

3. 你的联系方式:
  临时：@oneworld

## Notes

<!-- Content_START -->

### 2025.03.10
#### 重走学习路
* 主要针对：`https://epf.wiki/#/eps/week1`第一周内容进行学习
* **回顾uinx** UNIX 是一种**多用户**、**多任务**、**文件系统**、**模块化**、**权限管理**的操作系统。
  * 从而衍生出来设计理念：
   > “小而精”（Do One Thing and Do It Well）：每个程序应该只做一件事，并且做到极致。
   “一切皆文件”（Everything is a File）：设备、进程、网络等都用文件表示，统一操作方式。
   “管道”机制（Pipes & Filters）：将多个小程序组合，利用 |（管道）连接，使数据流动，提高灵活性。
   模块化设计：程序可以像乐高积木一样组合使用，而不是一个庞大复杂的单体程序。
* **非对称加密** 使用一对密钥：公钥用于加密，私钥用于解密，解决了对称加密中密钥分发的难题，允许安全的通信和身份验证。此外，非对称加密支持数字签名功能，发送者使用私钥签名，接收者使用公钥验证签名的真实性和完整性。其他功能与应用包括：密钥交换，例如ElGamal加密算法用于安全地交换对称加密所需的密钥；基于身份的加密，通过将用户的身份信息直接用作公钥，简化密钥管理过程，如组合公钥（CPK）是一种基于标识的非对称公钥管理体制，能够通过微小的生成矩阵产生近乎无限的密钥，解决密钥管理中的规模化难题；椭圆曲线密码学（ECC），利用椭圆曲线数学结构，提供与传统加密算法相同的安全性，但使用更短的密钥长度，提高了效率，广泛应用于资源受限的环境，如移动设备和智能卡；最优非对称加密填充（OAEP），是一种与RSA加密一起使用的填充方案，通过添加随机性元素和防止部分解密，增强了加密的安全性。
* **黄白书** 以太坊是一个去中心化的平台，旨在支持智能合约和去中心化应用（dApps）的开发和运行。其核心架构包括以下关键组件：
    * **框架结构：**
        * **账户：** 以太坊支持两种类型的账户：外部拥有账户（EOA）和合约账户。EOA由私钥控制，主要用于用户发起交易；合约账户由智能合约代码控制，能够在接收到交易时执行特定代码。
        * **交易：** 交易是从一个账户到另一个账户的信息传递，可能包含数据和价值转移。交易可以触发智能合约的执行，导致状态的改变。
        * **区块链：** 以太坊的区块链由一系列区块组成，每个区块包含多个交易。区块按时间顺序链接，形成一个不可变的记录。
    * **状态机：** 以太坊的状态机定义了系统的状态及其变化规则。系统状态由所有账户的状态组成，包括账户余额、存储数据等。每笔交易都会引起状态转换，新的状态取决于当前状态和交易的具体内容。
    * **执行层：** 执行层负责处理交易和执行智能合约。以太坊虚拟机（EVM）是执行层的核心组件，能够解释和运行智能合约的字节码。EVM提供了一个沙盒环境，确保合约代码的执行不影响主机系统的安全性。
    * **共识层：** 共识层确保网络中所有节点对区块链的状态达成一致。以太坊最初采用工作量证明（PoW）共识机制，要求矿工解决复杂的数学问题以验证交易和生成新区块。然而，随着以太坊2.0的推进，网络正逐步转向权益证明（PoS）机制，通过质押以太币来参与共识过程，提高网络的可扩展性和能源效率。


### 2025.03.11
#### 2th
* **路线图**
  ![](https://pbs.twimg.com/media/GCntEVFWwAAoWeI?format=jpg&name=large)
    * 这个路线图展示了 **以太坊（Ethereum）** 的未来发展计划，包括多个主要阶段和改进方向。它分为 **五大部分**，分别代表以太坊的关键技术升级：
      1. **The Merge（合并）**  
            - **已完成（2022 年 9 月）**  
            - 以太坊从 **工作量证明（PoW）** 过渡到 **权益证明（PoS）**，减少能源消耗，并为未来扩展奠定基础。

      2. **The Surge（激增）**  
            - 目标是 **提高以太坊的交易吞吐量**，主要通过 **Danksharding 和 Rollups（汇总）** 技术。  
            - **EIP-4844（Proto-Danksharding）** 作为过渡阶段，引入“Blob 交易”，降低 Layer 2（如 Arbitrum、Optimism）的成本。

      3. **The Scourge（净化）**  
            - 解决 **MEV（最大可提取价值）** 相关问题，确保网络去中心化和公平性。  
            - 主要目的是减少矿工/验证者对交易排序的操控，并优化以太坊的 **去中心化中立性**。

      4. **The Verge（边界）**  
            - 重点是 **Verkle Trees（弗克尔树）**，优化存储和状态证明。  
            - 使以太坊节点更轻量级，减少存储需求，提高验证效率。

      5. **The Purge（清理）**  
            - 通过删除旧的历史数据，减少以太坊的 **状态膨胀（State Bloat）**，提高节点同步速度和存储效率。

      6. **The Splurge（锦上添花）**  
            - 其他改进和优化，确保以太坊运行更稳定和高效，比如 **EIP-4337（账户抽象）** 以及未来协议改进。
* **客户端多样性** 以太坊客户端多样性对于网络的安全性、去中心化和弹性至关重要。客户端是运行以太坊协议的软件，负责处理交易、验证区块和与其他节点通信。以太坊的客户端可以分为执行层（EL）和共识层（CL）两部分，执行层客户端如 Geth、Nethermind、Besu 和 Erigon，主要处理智能合约执行和账户状态，而共识层客户端如 Prysm、Lighthouse、Nimbus 和 Teku，负责验证区块和参与共识协议。客户端多样性能提高网络安全性，因为如果某个客户端占据主导地位，出现漏洞或遭受攻击时，可能会导致整个网络受损。通过分散使用多个客户端，即使某个客户端出现问题，网络仍能正常运行，从而增强网络的弹性。此外，去中心化程度也依赖于客户端的多样性，避免了单一客户端的集中控制。在现实中，过去以太坊的执行层主要依赖 Geth，而共识层则大多验证者使用 Prysm，导致集中化问题。因此，社区鼓励验证者和开发者选择不同的客户端，增强网络的去中心化和安全性。总的来说，客户端多样性是以太坊网络健康运作的基础。


### 2025.03.12
#### 3th toaday is CL
* **CL共识层组成和运行方式** 
      1. **信标链（Beacon Chain）**：是CL的主要组件，于2020年12月启动，作为PoS共识机制的核心。
      2. **验证者（Validators）**：代替矿工成为网络安全的守护者，需要质押32个ETH才能成为验证者。
      3. **委员会（Committees）**：每个时隙（slot）随机选择的验证者小组，负责对区块进行投票。
      4. **时隙和纪元（Slots and Epochs）**：
           -  每个时隙持续12秒
           -  32个时隙组成一个纪元（约6.4分钟）
           -  每个时隙由一个验证者提议新区块
      5. **证明（Attestations）**：验证者对区块有效性的投票。
      6. **分叉选择算法（Fork Choice Rule）**：用于确定最长合法链，目前使用LMD-GHOST算法。 

* **拜占庭协议在以太坊CL层的应用** 拜占庭容错（Byzantine Fault Tolerance，BFT）在以太坊CL层的多个方面得到应用：
      1. **Casper FFG（Friendly Finality Gadget）**：
        - 这是以太坊使用的BFT共识机制
        - 当区块获得2/3以上验证者的投票时，会被标记为"确认的"（justified）
        - 当一个"确认的"区块的子区块同样被确认后，原区块变为"最终确定的"（finalized）
        - 这保证网络能够容忍最多1/3的恶意或离线节点
      2. **同步委员会（Sync Committees）**：
        - 负责为轻客户端提供更新，使用BFT机制确保信息准确性
        - 每256个纪元（约27小时）更换一次
      3. **RANDAO机制**：
        - 用于生成验证者选择的随机数
        - 设计为抗拜占庭攻击，即使部分参与者是恶意的也能维持随机性
      4. **惩罚机制（Slashing）**：
        - 对违反协议的验证者实施经济惩罚
            - 惩罚恶意行为（如同时为两个冲突区块投票）
            - 这部分解决了拜占庭将军问题中的"叛徒"问题
      5. **分叉选择**：
            - LMD-GHOST算法考虑验证者的投票权重
            -   能够在存在拜占庭节点的情况下仍选择正确的链

### 2025.03.13
#### 4th toaday is EL
* **EL定义** Execution Layer（EL）是以太坊架构中的关键组成部分，负责处理交易和执行智能合约。
* **EL构成部分**
      * **EVM（以太坊虚拟机）：** EVM是执行层的核心组件，负责在以太坊网络上执行智能合约。它提供了一个运行环境，使得智能合约能够以一致且可预测的方式执行。
      * **交易池：** 交易池存储待处理的交易，这些交易由网络中的节点收集，并等待验证和执行。
      * **状态数据库：** 该数据库记录了以太坊网络的当前状态，包括账户余额、智能合约代码和存储等信息。

* **执行层的运作机制：**
      * **接收交易：** 用户发起交易，交易被广播到以太坊网络，并被节点接收到交易池中。
      * **打包交易：** 验证者从交易池中选择交易，打包成区块，并将区块提议给网络。
      * **验证交易：** 验证者验证交易的有效性，包括检查签名、账户余额等。
      * **执行交易：** 通过EVM执行交易，更新状态数据库中的相关信息。
      * **添加区块：** 验证者将验证通过的区块添加到区块链中，完成交易的确认。


* **区块验证**  共识层（CL）通过 `process_execution_payload` 函数验证区块的有效性，并将执行负载发送给执行层（EL）进行进一步验证。执行层通过状态转换函数（STF）执行区块交易，并更新 `StateDB`。验证过程包括检查区块头信息（如 gas 限制变化、EIP-1559 基础费用等）和执行交易。如果交易无效，则整个区块被拒绝。  

* **区块构建**  建区块的过程涉及从交易池（tx pool）获取最高收益的交易，并依次执行直到达到 gas 限制。过程中，若某笔交易无效，会跳过该交易继续执行剩余交易。最终，`Finalize` 函数将所有交易整理成完整区块并返回。交易池按交易费用优先级排序，保证构建者最大化收益。  

* **进一步探讨 STF、EVM 和 P2P 协议**  状态转换函数（STF）在 Geth 中的实现涉及 `newPayload`、`insertBlockWithoutSetHead` 等函数，它们执行区块并持久化区块状态。EVM 运行基于栈机，指令包括算术、位运算、环境信息、控制流、内存等。P2P 协议（devp2p）用于获取历史数据、同步待处理交易，并通过 Snap 同步机制高效获取链上状态，确保数据完整性和正确性。



### 2025.03.14
#### 4th  测试与安全
* **EVM测试**
  * **目的** 确保每个执行客户端（Execution Client）都符合以太坊规范，否则可能导致链的分叉。
      * 以太坊执行层规范（Ethereum Execution Layer Specification）来源：`https://github.com/ethereum/execution-spec-tests`
  * **测试要素**
      * **Pre-state（前置状态）**：描述以太坊链的状态，包括账户余额、nonce、代码和存储。
      * **Environment（环境变量）**：定义区块链状态，如时间戳、前区块哈希值、gas 限制等。
      * **Transaction（交易）**：测试区块链交互，涉及账户信息、交易金额、gas 限制等。
      * **Post-state（后置状态）**：修改或创建账户的最终状态。    
 * **EVM 测试格式**
      * **State Testing（状态测试）**：使用 state root（状态根） 进行验证。
      * **预期结果**：相同的输入应返回相同的 state root
      * **Fuzzy Differential State Testing（模糊差分测试)**：在基础交易上添加 FuzzyVM 生成的智能合约代码，检查所有客户端是否仍能返回相同的 state root。
      * **Blockchain Testing（区块链测试）**：需要完整区块测试（如 EIP-1559 基础费用计算）。
      * **Blockchain Negative Testing（区块链负面测试）**：向区块链添加无效区块，验证客户端是否能正确拒绝，并回溯到正确区块。

* **主要测试网络**

| **测试网**  | **状态** | **共识机制** | **用途** | **启动时间** | **RPC 端点** |
|------------|---------|-------------|----------|--------------|--------------|
| **Sepolia** | ✅ 运行中 | 权益证明（PoS） | **推荐** dApp & 合约测试 | 2021 年 10 月  | `https://ethereum-sepolia.publicnode.com` |
| **Holesky** | ✅ 运行中 | 权益证明（PoS） | **推荐** 验证者、Staking & 共识测试 | 2023 年 9 月 | `https://ethereum-holesky.publicnode.com` |  


### 2025.03.15
#### 5th -又见路线图
**以太坊发展路线图**

以太坊的路线图旨在提升网络的可扩展性、安全性和可持续性，主要包括以下阶段：

1. **合并（The Merge）**：已完成的阶段，将以太坊从工作量证明（PoW）转向权益证明（PoS），提高了网络的能源效率和安全性。

2. **涌现（The Surge）**：目标是通过引入分片技术和改进的Rollup方案，将交易处理能力提升至每秒10万笔以上。

3. **清除（The Purge）**：旨在减少历史数据和技术债务，简化协议，降低节点存储需求，提升网络性能。

4. **飞跃（The Splurge）**：包括各种小的升级和优化，以确保网络的稳定性和性能。

这些阶段并非线性推进，许多改进是并行进行的，具体实施时间可能会根据研究和开发的进展而调整。

**活跃的以太坊研究领域**

以太坊社区积极参与多个研究领域，以持续改进网络功能和性能，主要包括：

1. **共识机制研究**：关注以太坊的权益证明机制，包括识别和修补漏洞、量化加密经济安全性、提高客户端实现的安全性或性能，以及开发轻客户端等。

2. **执行层研究**：涉及交易执行、以太坊虚拟机（EVM）运行和生成执行有效负载等领域。研究内容包括构建轻客户端支持、研究Gas限制以及引入新数据结构（如Verkle树）等。

3. **客户端开发**：将协议研究成果应用于以太坊客户端的开发，包括更新客户端规范和构建具体实现。

4. **零知识证明和加密技术**：零知识证明（ZKP）和加密技术对于构建以太坊及其应用程序的隐私性和安全性至关重要。零知识是一个相对年轻但发展迅速的领域，存在许多开放的研究和开发机会。 citeturn0search1

**Blobspace与数据可用性** 为解决可扩展性问题，以太坊引入了Blobspace的概念，特别是在EIP-4844（Proto-Danksharding）中。Blobspace旨在降低Rollup方案提交数据的成本，从而提高网络的整体可扩展性。 

**以太坊的最终目标** Vitalik Buterin在《Endgame》一文中探讨了高交易吞吐量区块链的去中心化和抗审查性问题，提出了通过分层质押、引入欺诈证明或零知识证明、数据可用性采样以及次级交易通道等方式，确保即使在高交易量的情况下，区块验证仍然是信任最小化和高度去中心化的，同时防止区块生产者进行审查。 

 

### 2025.03.16
#### 6th-spec 规范

* **以太坊共识规范（consensus-specs）**
  * **具体内容**：
      - **共识机制**：详细描述了以太坊权益证明（Proof-of-Stake, PoS）共识机制的规则和协议。
      - **信标链规范**：定义了信标链的结构、状态转换函数、验证规则等。
      - **验证者操作**：规定了验证者的职责、激励和惩罚机制，以及验证者的生命周期管理。
      - **同步协议**：描述了节点之间如何同步区块和状态，以保持网络一致性。
  * **关键要点**：
      - **PoS共识机制**：通过质押以太币，验证者被选中提议和验证区块，取代了工作量证明（PoW）机制。
      - **信标链**：作为以太坊2.0的核心链，协调分片链的共识和跨链通信。
      - **验证者激励**：通过奖励和惩罚机制，确保验证者的诚实行为，维护网络安全性。
  * **规范的意义**：
      - **标准化**：提供了统一的共识协议规范，确保不同客户端实现的一致性。
      - **安全性**：通过明确的规则和验证者管理，增强网络的安全性和可靠性。
      - **可扩展性**：为未来的网络升级和功能扩展奠定基础。

* **以太坊执行层规范（EEL-spec）**
  * **具体内容**：
      - **交易处理**：定义了交易的格式、验证规则和执行逻辑。
      - **智能合约执行**：描述了EVM（以太坊虚拟机）的操作码、执行环境和合约调用机制。
      - **状态管理**：规定了账户模型、存储结构和状态转换函数。
      - **Gas机制**：解释了交易和合约执行的费用计算和Gas限制。
  * **关键要点**：
      - **EVM**：作为以太坊的核心执行环境，负责智能合约的部署和执行。
      - **账户模型**：以太坊采用账户余额和合约存储的状态管理方式。
      - **Gas机制**：通过费用机制，防止资源滥用，确保网络的健康运行。
  * **规范的意义**：
      - **一致性**：确保不同客户端在交易处理和合约执行上的行为一致。
      - **安全性**：通过明确的执行规则，防范潜在的攻击和漏洞。
      - **开发指导**：为客户端开发者和智能合约开发者提供清晰的参考。

* **以太坊执行规范（execution-specs）**
  * **具体内容**：
      - **网络升级**：记录并规范了以太坊各次网络升级（硬分叉）的具体内容和技术细节。
      - **协议变更**：详细描述了每次升级中协议的修改，包括共识规则、EVM改进等。
      - **升级流程**：定义了网络升级的提案、测试和部署流程。
  * **关键要点**：
      - **网络升级**：以太坊通过定期的硬分叉，引入新功能和改进，提升网络性能和安全性。
      - **协议变更**：每次升级都会对协议进行调整，可能涉及Gas成本、操作码行为等方面。
      - **社区协作**：网络升级需要开发者、矿工和用户的共同参与和协作。
  * **规范的意义**：
      - **透明性**：清晰记录协议的演进过程，增强社区信任。
      - **指导性**：为客户端和dApp开发者提供升级参考，确保兼容性。
      - **安全性**：通过规范的升级流程，减少潜在的分叉和网络分裂风险。


### 2025.03.17
#### 7th-Reth client
* **Reth 客户端**
  * **具体内容**：
      - **以太坊执行层（EL）客户端**：Reth 作为 Rust 实现的以太坊执行层客户端，支持 Engine API，与共识层（CL）兼容。
      - **轻量级、高效设计**：Reth 采用 Rust 语言，专注于性能优化，目标是成为最轻量级、最模块化的以太坊节点。
      - **模块化架构**：核心组件可单独使用，开发者可以灵活组合使用不同模块。
      - **自由开源**：采用 Apache/MIT 许可，所有代码和设计均可公开访问和贡献。
  * **关键要点**：
      - **兼容性**：Reth 遵循以太坊协议标准，与主流共识层（CL）客户端无缝配合。
      - **高性能**：借鉴 Erigon 的分阶段同步策略，提高节点运行效率。
      - **模块化**：所有组件均可独立使用，开发者可根据需求自由调整。
  * **客户端的意义**：
      - **促进客户端多样性**：降低以太坊对 Geth、Nethermind 等客户端的依赖，增强网络稳定性。
      - **提高开发灵活性**：为开发者提供灵活的 Rust 组件，支持自定义区块链应用。
      - **优化同步和存储**：减少资源占用，提高节点运行效率。

* **Reth 设计和架构**
  * **具体内容**：
      - **核心架构**：Reth 采用模块化设计，拆分不同功能组件，如数据库存储、EVM 执行、交易池管理等。
      - **存储优化**：使用高效的数据结构（如 MPT、索引优化）来减少磁盘 IO，提高查询效率。
      - **同步模式**：支持从创世块同步、快速同步，以适应不同场景需求。
      - **Rust 生态**：依赖 Alloy、revm 等 Rust 以太坊库，提升代码复用性和安全性。
  * **关键要点**：
      - **模块独立性**：每个组件都可以单独作为库使用，提高可维护性和扩展性。
      - **性能优化**：利用 Rust 的并发特性和内存安全机制，提升执行效率。
      - **高可用性**：优化存储和网络传输，降低运行成本，提高可靠性。
  * **架构的意义**：
      - **增强可维护性**：模块化架构便于开发者维护和扩展功能。
      - **提高效率**：优化存储和同步方式，提升以太坊节点运行性能。
      - **支持多样化应用**：可作为全节点、轻节点或离线数据索引器使用。

* **Reth 代码库概述、示例**
  * **具体内容**：
      - **GitHub 代码库**：[Reth GitHub](https://github.com/paradigmxyz/reth) 提供完整的 Rust 代码实现。
      - **核心模块**：
          - `reth-node`：完整的 Reth 节点实现，负责区块同步、交易处理等功能。
          - `reth-db`：存储模块，提供高效的数据库存储解决方案。
          - `reth-primitives`：封装了区块、交易、状态等基本数据结构。
          - `reth-network`：管理以太坊 P2P 网络连接，处理数据同步和消息传递。
      - **示例代码**：
          ```rust
          use reth_node::NodeConfig;
          fn main() {
              let config = NodeConfig::default();
              println!("Reth 节点配置: {:?}", config);
          }
          ```
  * **关键要点**：
      - **代码结构清晰**：核心模块独立，便于扩展和修改。
      - **Rust 生态整合**：充分利用 Rust 语言的安全性和性能优势。
      - **开发者友好**：提供详细的文档和示例，方便开发者快速上手。
  * **代码库的意义**：
      - **提供完整实现**：让开发者可以直接运行 Reth 节点，或基于其代码进行二次开发。
      - **支持模块化使用**：开发者可选择性地使用 Reth 的某些组件，而不必运行完整节点。
      - **提升 Rust 以太坊生态**：为 Rust 开发者提供高质量的以太坊客户端代码库。

* **Reth 的特点和亮点**
  * **具体内容**：
      - **高效同步**：采用优化的分阶段同步策略，减少存储占用和数据处理时间。
      - **轻量级设计**：相比 Geth 和 Erigon，Reth 的存储和计算开销更低。
      - **模块化开发**：所有核心功能均可独立使用，支持不同应用场景的定制开发。
      - **开源透明**：代码完全开源，任何人都可以审查、修改和贡献。
  * **关键要点**：
      - **速度快**：优化同步和数据库访问，提高节点启动和运行效率。
      - **存储优化**：减少磁盘占用，降低存储成本，提高数据检索性能。
      - **灵活扩展**：可用于全节点、轻客户端或定制区块链应用。
  * **特点的意义**：
      - **提升以太坊生态**：提供更高效的客户端，实现网络去中心化。
      - **降低运行成本**：减少存储和计算资源占用，提高运营效率。
      - **支持创新**：开发者可以利用 Reth 的模块进行更多 Web3 应用开发。

### 2025.03.18
#### 8th-Teku CL client

* **Teku CL 客户端概述**
  * **具体内容**：
      - **GitHub 代码库**：[Teku GitHub](https://github.com/ConsenSys/teku) 提供完整的 Java 代码实现。
      - **核心模块**：
          - `beacon-chain`：实现信标链的核心逻辑，包括区块处理、状态管理和验证者职责。
          - `validator-client`：管理验证者的签名、密钥处理和提案任务。
          - `networking`：处理 P2P 网络通信，管理 Libp2p 连接。
          - `storage`：提供持久化存储，支持数据库备份和恢复。
      - **示例代码**：
          ```java
          public class TekuExample {
              public static void main(String[] args) {
                  System.out.println("Teku 客户端示例运行成功！");
              }
          }
          ```
  * **关键要点**：
      - **模块化架构**：各核心模块独立，便于扩展和维护。
      - **Java 生态整合**：利用 Java 语言的稳定性和可移植性。
      - **企业级支持**：由 ConsenSys 维护，适用于机构级 Staking 需求。
  * **代码库的意义**：
      - **提供完整的共识层实现**：支持以太坊 2.0 验证者运行和网络同步。
      - **支持模块化使用**：开发者可灵活组合 Teku 的各组件。
      - **提升以太坊 PoS 生态**：助力共识层客户端的多样化，增强网络安全性。

* **REST API 声明式框架**
  * **具体内容**：
      - **Teku 提供 REST API，方便开发者远程访问信标链数据。**
      - **核心 API 端点**：
          - `/eth/v1/beacon/blocks`：获取最新信标链区块信息。
          - `/eth/v1/validator/duties`：查询验证者的职责。
          - `/eth/v1/node/identity`：获取节点身份信息。
  * **关键要点**：
      - **标准化 API 设计**，便于集成和扩展。
      - **提供 OpenAPI 文档**，简化开发者对接流程。
      - **适用于 Staking 运营商**，可远程监控和管理验证者。

* **开发流程一瞥：EIP -> Spec -> Code**
  * **具体内容**：
      - **Ethereum 改进提案（EIP）流程**：
          1. **EIP 提出**：社区成员提出新特性（如 EIP-7251）。
          2. **规范（Spec）制定**：编写详细技术规范，确保一致性。
          3. **代码实现**：共识层客户端（如 Teku）根据 Spec 进行开发。
  * **关键要点**：
      - **规范化开发流程**：确保协议改进的一致性和可行性。
      - **社区驱动**：开发者和研究人员共同维护。
      - **测试与审计**：确保改动不会影响网络稳定性。

* **EIP-7251（maxEB） 示例**
  * **具体内容**：
      - **EIP-7251 提出 `maxEB`（最大有效区块）的概念**：
          - 允许共识客户端调整最大区块大小，提高吞吐量。
          - 影响区块验证逻辑，使其适应不同的网络环境。
      - **Teku 代码实现**：
          - 增加 `maxEB` 配置项，允许用户调整区块大小。
          - 变更信标链状态处理逻辑，使其兼容动态区块大小。
  * **关键要点**：
      - **提高网络扩展性**：适应不同 Staking 运营需求。
      - **灵活的区块大小控制**，优化链上交易处理。
      - **与现有共识逻辑兼容**，不会影响安全性。

* **信标 API**
  * **具体内容**：
      - **信标 API（Beacon API）提供访问以太坊 2.0 信标链数据的能力。**
      - **主要端点**：
          - `/eth/v1/beacon/states`：获取信标链最新状态。
          - `/eth/v1/validator/attestations`：查询验证者的证明数据。
          - `/eth/v1/node/peers`：获取当前 P2P 连接的节点列表。
  * **关键要点**：
      - **提供统一的 API 访问方式**，兼容不同客户端（Teku、Lighthouse）。
      - **支持数据监控和分析**，方便 Staking 运营商优化策略。
      - **适用于自动化管理**，降低人工干预成本。

* **Lighthouse 共识客户端架构**
  * **具体内容**：
      - **Lighthouse 是 Rust 实现的共识层客户端，与 Teku 类似**。
      - **架构特点**：
          - **模块化设计**：独立的信标链、P2P 网络、存储等组件。
          - **高效性能优化**：Rust 语言特性提升吞吐量和资源利用率。
          - **轻量级实现**：适用于资源受限的环境。
  * **关键要点**：
      - **与 Teku 形成对比**，展示 Java 与 Rust 在共识客户端中的应用差异。
      - **强调安全性与高效性**，适合不同以太坊 2.0 参与者。
      - **共识层的多样性**，增强网络稳定性和去中心化。

* **贡献者的 Teku 代码约定**
  * **具体内容**：
      - **代码风格**：
          - 遵循 Java 最佳实践，代码清晰、易维护。
          - 使用 `Checkstyle` 和 `SpotBugs` 进行静态分析。
      - **开发流程**：
          - 提交 PR 需通过 CI 测试。
          - 变更需要完整的单元测试和集成测试。
  * **关键要点**：
      - **维护高质量代码**，提高可读性和可维护性。
      - **CI/CD 自动化**，确保代码合规性。
      - **友好的贡献流程**，降低新开发者的学习成本。

* **Teku 与合并，PEEPanEIP#83**
  * **具体内容**：
      - **以太坊合并（The Merge）**：
          - Teku 作为共识层客户端，确保以太坊从 PoW 过渡到 PoS。
          - 需要与 Execution 层（如 Geth）保持同步。
      - **PEEPanEIP#83**：
          - 讨论 Teku 适配 The Merge 的过程。
          - 影响共识规则变更、状态转换和交易验证等关键技术点。
  * **关键要点**：
      - **Teku 在以太坊合并中的核心作用**，确保 PoS 过渡顺利。
      - **与 Execution 层的交互优化**，提升网络运行效率。
      - **技术社区的广泛参与**，推动以太坊协议的演进。

### 2025.03.19
#### 9th-kurtosis
* **安装kurtosis CLI**
```
echo "deb [trusted=yes] https://apt.fury.io/kurtosis-tech/ /" | sudo tee /etc/apt/sources.list.d/kurtosis.list
sudo apt update
sudo apt install kurtosis-cli
```

* **本地测试**
    * 启动本地开发网络(my-testnet为网络命名)：
        ```
        kurtosis run --enclave my-testnet github.com/ethpandaops/ethereum-package

        ```
    * 访问服务Shell：
        ```
        kurtosis service shell my-testnet el-1-geth-lighthouse

        ```
    * 连接到 Geth 控制台:
        ```
        geth --datadir /data/geth/execution-data/ attach

        ```
    * 监听区块信息
        ```
        var filter = eth.filter('latest');
        filter.watch(function(error, result) {
            if (!error) {
                var block = eth.getBlock(result, true);
                console.log(block);
            }
        });
        ```
* **常用命令**

  * **引擎管理**
    * `kurtosis engine status`：查看当前 Kurtosis 引擎的状态。
    * `kurtosis engine logs`：查看 Kurtosis 引擎的日志。
    * `kurtosis engine start`：启动 Kurtosis 引擎。
    * `kurtosis engine stop`：停止 Kurtosis 引擎。
    * `kurtosis engine clean`：清理所有环境和关联资源，并停止引擎。

  * **环境管理**
    * `kurtosis run <package>`：通过 GitHub URL 或本地路径启动指定的包。
    * `kurtosis enclave rm -f <enclave-name>`：删除指定名称的环境及其资源。
    * `kurtosis clean -a`：清理所有环境和资源。

  * **服务管理**
    * `kurtosis service shell <enclave-name> <service-name>`：获取服务的 shell 访问权限。
    * `kurtosis service logs <enclave-name> <service-name>`：查看服务的日志。

### 2025.03.20
#### 10th-Pre-reading
* **定义** 以太坊虚拟机（EVM）预编译合约是部署在特定地址上的原生合约，旨在提供高效的底层功能，如加密操作。这些合约直接在EVM中实现，以提高性能并降低复杂性。

* **预编译合约的集成方式** 预编译合约在EVM中以固定地址存在，通常从`0x1`到`0x8`，每个地址对应一个特定功能。例如，`0x1`地址对应椭圆曲线数字签名算法的公钥恢复功能（`ecrecover`），`0x2`地址对应SHA-256哈希函数。这些合约在EVM内部实现，开发者可以通过调用这些固定地址来使用相应功能。 

* **现有的预编译合约** 根据EVM的规范，以下是一些常见的预编译合约及其对应功能：
    - `0x1`：`ecrecover`，用于从签名中恢复公钥。
    - `0x2`：`sha256`，计算SHA-256哈希值。
    - `0x3`：`ripemd160`，计算RIPEMD-160哈希值。
    - `0x4`：`identity`，返回输入数据本身。

* **L1和L2对预编译合约的使用** 在以太坊第一层（L1）上，预编译合约被广泛用于执行复杂的加密操作，以提高效率并降低计算成本。在第二层（L2）解决方案中，预编译合约同样扮演重要角色。例如，Optimism的Bedrock升级中，L2账户可以通过调用预部署的Message Passer合约与L1合约交互，实现ETH从L2到L1的转移。 

### 2025.03.21
#### 11th-DAS
* **以太坊可扩展性**
    * **具体内容**
        - **以太坊的扩展性挑战**：
            - 计算能力受限，所有交易需由全网节点验证，导致吞吐量低。
            - 存储负担大，随着区块链增长，全节点存储需求持续增加。
            - 去中心化与扩展性的权衡，直接增加区块大小可能影响去中心化。
        - **扩展方案**：
            - **Layer 2 方案**：如状态通道（State Channels）、Rollups（Optimistic Rollup 和 ZK-Rollup）。
            - **分片（Sharding）**：以太坊 2.0 主要扩展方案，通过拆分多个并行处理的分片链提升性能。
    * **关键要点**
        - **以太坊目前面临扩展性瓶颈，需要更高的吞吐量支持去中心化应用（DApp）。**
        - **分片技术与 Layer 2 方案相结合，提高交易处理效率，同时保持去中心化和安全性。**
        - **Danksharding 方案的引入，进一步优化 Rollups 依赖的数据存储，降低 Layer 2 交易成本。**

* **分片的历史和前进的道路**
    * **具体内容**
        - **早期分片方案**：
            - 参考传统数据库的分片概念，计划将计算、存储、交易执行拆分到多个分片链。
            - 早期架构较复杂，跨分片交易同步困难。
        - **分片架构的演变**：
            - **早期设计（2018 年前后）**：
                - 采用多层分片架构，每个分片链有独立的状态、交易和验证者。
            - **以太坊 2.0（2020-2022 年）**：
                - 引入 **信标链（Beacon Chain）** 作为协调者，管理验证者和随机分片分配。
                - 逐步从 **计算分片（State Execution Sharding）** 转向 **数据分片（Data Availability Sharding）**。
            - **当前发展（2023+）**：
                - 采用 **Danksharding** 方案，重点提升数据可用性，支持 Rollups 进行交易执行。
                - 通过 **Proto-Danksharding（EIP-4844）** 作为过渡方案，引入“Blob 交易”优化存储。
    * **关键要点**
        - **以太坊分片架构经历了从计算分片到数据分片的演变，以适应 Layer 2 发展。**
        - **信标链作为核心协调层，确保分片的安全性和验证者管理。**
        - **Danksharding 通过数据分片优化存储和处理能力，结合 Rollups 提升吞吐量。**

* **数据可用性**
    * **具体内容**
        - **数据可用性问题**：
            - 如何确保分片区块的数据完整且可访问，即使部分节点离线或作恶。
            - 传统方案需要全节点存储所有数据，但这会影响扩展性。
        - **解决方案**：
            - **数据可用性采样（DAS）**：
                - 允许轻客户端只检查部分数据，利用概率机制检测数据完整性。
                - 结合 **Erasure Coding（纠删码）**，即使部分数据丢失，也能恢复完整信息。
            - **KZG 证明（Kate-Zaverucha-Goldberg Commitments）**：
                - 通过数学证明，确保数据完整性，无需所有验证者存储完整数据。
            - **Danksharding 方案**：
                - 采用 **Blob 交易** 存储 Rollup 交易数据，减少以太坊主链存储负担。
                - 轻客户端可利用 KZG 证明和 DAS 验证数据，而无需下载完整数据。
    * **关键要点**
        - **数据可用性是分片架构的核心问题，影响整个以太坊 2.0 的安全性和扩展性。**
        - **数据可用性采样（DAS）结合 KZG 证明，实现高效的数据完整性验证。**
        - **Danksharding 通过优化数据存储方式，使 Layer 2 方案更加高效，降低 Rollups 交易成本。**

### 2025.03.22
#### 12th-Verkle Trees
* **The Verge：以太坊的未来阶段**
    * **动机和好处**
        - **动机**：采用 Verkle 树的主要动机是实现无状态客户端，使节点无需存储完整状态即可验证交易，从而降低硬件要求，促进网络的去中心化。
        - **好处**：
            - **减少证明大小**：相比传统的 Merkle Patricia 树，Verkle 树的证明大小更小。例如，对于包含 10 亿个数据对象的树，传统 Merkle 树的证明大小约为 1 KB，而 Verkle 树的证明仅需不到 150 字节。
            - **提高验证效率**：更小的证明尺寸和更高效的验证过程，有助于提升网络性能。

* **Verkle 密码学**
    - **Verkle 树**：基于多项式承诺的树形结构，支持高效的证明和验证操作。与传统的 Merkle Patricia 树不同，Verkle 树使用多项式承诺来替代哈希函数，从而实现更小的证明尺寸和更快的验证速度。

* **数据结构**
    - **向量承诺（Vector Commitments）**：
        - 允许存储在 Verkle 树中的数据被高效地验证，而无需下载整个树。
        - 通过多项式承诺确保数据完整性，并减少存储和计算成本。

* **Gas 定价**
    - **影响**：引入 Verkle 树可能影响以太坊的 Gas 定价模型。由于状态访问和修改的成本可能降低，Gas 费用可能需要重新评估，以反映更高效的状态操作。这有助于提高交易处理效率，降低用户成本。

* **将状态树转换为 Verkle**
    - **转换过程**：将以太坊现有的 Merkle Patricia 树转换为 Verkle 树需要进行状态迁移。这包括重新构建状态树，并确保所有节点和客户端能够兼容新的数据结构。

* **现状和挑战**
    - **现状**：截至目前，Verkle 树的研究和开发仍在进行中。
    - **挑战**：
        - **兼容性**：确保现有客户端和基础设施与新的数据结构兼容。
        - **安全性**：验证新结构的安全性，防止潜在漏洞。
        - **性能优化**：在实际应用中优化 Verkle 树的性能，以满足以太坊网络的需求。

* **总结**
    - Verkle 树通过减少状态证明大小，提高验证效率，使无状态客户端成为可能。
    - 未来以太坊将从 Merkle Patricia 树迁移到 Verkle 树，以降低存储需求并优化 Gas 费用。
    - 仍需解决兼容性、安全性和性能优化等挑战，以确保平稳过渡。

### 2025.03.23
#### 13th-MEV
* **以太坊中的 MEV、协议服务及其影响**

    * **最大可提取价值（MEV）**
        - 最大可提取价值（MEV）指的是区块生产者通过在区块中包含、排除或重新排序交易，所能提取的超出标准区块奖励和 Gas 费用的最大价值。
        - 在以太坊从工作量证明（PoW）转向权益证明（PoS）后，验证者取代矿工，负责交易的包含和排序。然而，MEV 的提取方式依然存在，可能导致抢先交易、交易费用增加等问题，影响网络公平性和用户体验。

    * **提议者与构建者分离（PBS）及相关提案**
        - **提议者与构建者分离（PBS）** 是一种提高以太坊网络可扩展性和安全性的机制。核心思想是将区块提议者和区块构建者的职责分离，分别负责提议新区块和构建区块内容。
        - **嵌入式提议者与构建者分离（ePBS）**（EIP-7732）进一步将 PBS 机制直接集成到以太坊协议中，减少对第三方服务的依赖，优化区块验证过程，提高网络性能。

    * **MEV 烧伤**
        - MEV 烧伤是一种通过将部分 MEV 收益销毁来减少其负面影响的机制。
        - 该机制旨在降低验证者过度追求 MEV 的动机，维护网络公平性。然而，具体实施方案和效果仍在研究和讨论中。

    * **彩虹质押**
        - 彩虹质押是一种多元化质押策略，允许验证者在不同的协议和链上分散其质押资产，以降低风险并提高收益。
        - 这种方法有助于增强网络的去中心化程度和安全性。

    * **分片的历史和前进的道路**
        * **早期分片方案**
            - 参考传统数据库的分片概念，计划将计算、存储、交易执行拆分到多个分片链。
            - 由于架构复杂，跨分片交易的同步存在困难。

        * **分片架构的演变**
            - **早期设计（2018 年前后）**：
                - 采用多层分片架构，每个分片链拥有独立的状态、交易和验证者。
            - **以太坊 2.0（2020-2022 年）**：
                - 随着研究的深入，分片设计逐渐简化，强调数据可用性和跨分片通信的效率，旨在提高网络的可扩展性和用户体验。






<!-- Content_END -->
